<!-- Main Product Showcase Section -->
<section class="bg-gray-50 min-h-screen mb-8 py-16 px-6">
  <!-- Hero -->
  <div class="text-center mb-12">
    <!-- Main Heading -->
    <h1 class="text-4xl md:text-5xl font-serif font-bold text-primary mb-4">Haneen's Collection</h1>
    
    <!-- Subheading -->
    <p class="text-xl md:text-2xl font-light text-primary italic mb-6">Prêt-à-Porter</p>
    
    <!-- Description -->
    <p class="mt-4 text-lg text-gray-700 max-w-2xl mx-auto">
      Explore our chic ready-to-wear collection, blending effortless style with refined craftsmanship. 
      Designed for the dynamic woman who values both elegance and versatility.
    </p>
  </div>

  <!-- Loading and Error States -->
  <div *ngIf="isLoading" class="text-center py-12">
    <div class="inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-black"></div>
    <p class="mt-4 text-gray-600">Loading products...</p>
  </div>

  <div *ngIf="error" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative max-w-2xl mx-auto mb-8" role="alert">
    <span class="block sm:inline">{{ error }}</span>
    <button (click)="loadProducts()" class="absolute top-0 bottom-0 right-0 px-4 py-3">
      <svg class="fill-current h-6 w-6 text-red-500" role="button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title>Close</title><path d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"/></svg>
    </button>
  </div>

  <!-- Category Filters -->
  <div class="flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-4 mb-10">
    <!-- Filters Button (Left) - Full width on mobile, auto on larger screens -->
    <div class="w-full sm:w-auto">
      <app-product-filters (filtersApplied)="applyFilters()"></app-product-filters>
    </div>
    
    <!-- Middle Section - Stacked on mobile, row on larger screens -->
    <div class="flex flex-col xs:flex-row items-center justify-between gap-4 w-full sm:w-auto">
      <!-- Product Count - Left on mobile, center on larger screens -->
      <div class="text-gray-600 order-1 xs:order-none">
        <span class="font-medium">{{ totalProducts }}</span> products
      </div>
      
      <!-- Sort Dropdown - Full width on mobile, auto on larger screens -->
      <div class="relative w-full xs:w-auto order-0 xs:order-none">
        <select [(ngModel)]="sortOption" (change)="sortProducts(sortOption)" class="w-full xs:w-auto appearance-none bg-gray-200 text-gray-700 px-4 py-2 pr-8 rounded-sm hover:bg-gray-300 cursor-pointer text-sm sm:text-base">
          <option value="best-selling">Best Selling</option>
          <option value="a-z">Alphabetically, A-Z</option>
          <option value="z-a">Alphabetically, Z-A</option>
          <option value="price-high">Price, high to low</option>
          <option value="price-low">Price, low to high</option>
          <option value="date-new">Date, new to old</option>
          <option value="date-old">Date, old to new</option>
        </select>
        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
          </svg>
        </div>
      </div>
    </div>
  </div>

  <!-- Product Grid -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 max-w-7xl mx-auto">
    <!-- Product Card -->
    <div *ngFor="let product of filteredProducts" class="bg-white rounded-2xl shadow-lg hover:shadow-2xl transition overflow-hidden group">
      <div class="relative">
        <img 
          [src]="getPrimaryImage(product) || 'https://via.placeholder.com/300'" 
          [alt]="product.name" 
          class="w-full h-60 object-cover group-hover:scale-105 transition-transform"
        />
        <span *ngIf="product.isNew" class="absolute top-3 right-3 bg-black text-white text-xs px-2 py-1 rounded">NEW</span>
        <span *ngIf="product.salePrice" class="absolute top-3 right-3 bg-red-600 text-white text-xs px-2 py-1 rounded">SALE</span>
      </div>
      <div class="p-5">
        <h3 class="text-lg font-bold text-gray-900 mb-1">{{ product.name }}</h3>
        <p class="text-sm text-gray-500 mb-2">{{ product.shortDescription }}</p>
        <div class="flex justify-between items-center mt-4">
          <div>
            <span *ngIf="product.salePrice" class="text-lg font-semibold text-green-600">
              ${{ product.salePrice }}
              <span class="text-sm text-gray-500 line-through ml-2">${{ product.originalPrice }}</span>
            </span>
            <span *ngIf="!product.salePrice" class="text-lg font-semibold text-green-600">
              ${{ product.originalPrice }}
            </span>
          </div>
          <button class="bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800">View</button>
        </div>
      </div>
    </div>
  </div>

  <!-- No Products Found -->
  <div *ngIf="!isLoading && filteredProducts.length === 0" class="text-center py-12">
    <p class="text-gray-600 text-lg">No products match your filters. Try adjusting your search criteria.</p>
    <button (click)="applyFilters()" class="mt-4 bg-black text-white px-6 py-2 rounded-lg hover:bg-gray-800">
      Reset Filters
    </button>
  </div>
</section>